name: Backport to stable
on:
  push:
    tags: ["v*-stable"]
  workflow_dispatch:
    inputs:
      version:
        description: "Stable tag (e.g. v1.2.0-stable) â€” leave empty to use latest"
        default: ""
        type: string

permissions:
  issues: write  # Required by report-failure job in reusable workflow

jobs:
  backport:
    uses: trudenboy/ma-provider-tools/.github/workflows/reusable-sync-to-fork.yml@main
    with:
      manifest_path: {{ manifest_path }}
      provider_path: {{ provider_path }}
{%- raw %}
      target_branch: stable
      version: ${{ inputs.version }}
      create_pr: true
{%- endraw %}
    secrets: inherit
