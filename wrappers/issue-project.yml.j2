name: Auto-add issues to project

on:
  issues:
    types: [labeled]

permissions:
  issues: read
  repository-projects: write

jobs:
  add-to-project:
    if: {% raw %}${{ startsWith(github.event.label.name, 'incident:') }}{% endraw %}
    runs-on: ubuntu-latest
    steps:
      - name: Add to MA Ecosystem project
        env:
          GH_TOKEN: {% raw %}${{ secrets.GITHUB_TOKEN }}{% endraw %}
        run: |
          gh project item-add 3 --owner trudenboy \
            --url {% raw %}${{ github.event.issue.html_url }}{% endraw %}
