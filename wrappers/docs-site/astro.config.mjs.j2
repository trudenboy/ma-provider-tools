// @ts-check
import { defineConfig } from 'astro/config';
import starlight from '@astrojs/starlight';

// https://astro.build/config
export default defineConfig({
	site: 'https://{{ repo.split('/')[0] }}.github.io/{{ repo.split('/')[1] }}',
	base: '/{{ repo.split('/')[1] }}',
	integrations: [
		starlight({
			title: '{{ display_name }} · MA Provider',
			{% if locale == 'ru' %}locales: {
				root: { label: 'Русский', lang: 'ru' },
				en: { label: 'English', lang: 'en' },
			},
			defaultLocale: 'root',
			{% endif %}editLink: {
				baseUrl: 'https://github.com/{{ repo }}/edit/{{ default_branch }}/docs-site/src/content/docs/',
			},
			social: [
				{ icon: 'github', label: 'GitHub', href: 'https://github.com/{{ repo }}' },
			],
			sidebar: [
				{% if locale == 'ru' %}{ label: 'Главная', translations: { en: 'Home' }, slug: 'index' },
				{ label: 'Настройка', translations: { en: 'Configuration' }, slug: 'configuration' },
				{% if features is defined and features %}{ label: 'Возможности', translations: { en: 'Features' }, autogenerate: { directory: 'features' } },
				{% endif %}{% if provider_type == 'music_provider' %}{ label: 'Известные проблемы', translations: { en: 'Known Issues' }, slug: 'known-issues' },
				{% endif %}{ label: 'Разработка', translations: { en: 'Development' }, items: [
					{ label: 'Окружение', translations: { en: 'Dev Environment' }, slug: 'development' },
					{ label: 'Docker', slug: 'dev-docker' },
					{ label: 'Тестирование', translations: { en: 'Testing' }, slug: 'testing' },
					{ label: 'Участие в разработке', translations: { en: 'Contributing' }, slug: 'contributing' },
					{ label: 'Управление инцидентами', translations: { en: 'Incident Management' }, slug: 'incident-management' },
				] },
			{% else %}{ label: 'Home', slug: 'index' },
				{ label: 'Configuration', slug: 'configuration' },
				{% if features is defined and features %}{ label: 'Features', autogenerate: { directory: 'features' } },
				{% endif %}{% if provider_type == 'music_provider' %}{ label: 'Known Issues', slug: 'known-issues' },
				{% endif %}{ label: 'Development', items: [
					{ label: 'Dev Environment', slug: 'development' },
					{ label: 'Docker', slug: 'dev-docker' },
					{ label: 'Testing', slug: 'testing' },
					{ label: 'Contributing', slug: 'contributing' },
					{ label: 'Incident Management', slug: 'incident-management' },
				] },
			{% endif %}],
		}),
	],
});
